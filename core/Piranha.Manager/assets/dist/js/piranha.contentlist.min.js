piranha.contentlist=new Vue({el:"#contentlist",data:{loading:!0,group:null,items:[],types:[]},methods:{bind:function(n){this.group=n.group,this.types=n.types,this.items=n.items.map(function(t){var e=n.types.find(function(n){return n.id===t.typeId});return t.type=e.title||t.typeId,t})},load:function(n){var t=this;piranha.permissions.load(function(){fetch(piranha.baseUrl+"manager/api/content/"+n+"/list").then(function(n){return n.json()}).then(function(n){t.bind(n),t.loading=!1}).catch(function(n){console.log("error:",n)})})},remove:function(n){var t=this;piranha.alert.open({title:piranha.resources.texts.delete,body:piranha.resources.texts.deletePageConfirm,confirmCss:"btn-danger",confirmIcon:"fas fa-trash",confirmText:piranha.resources.texts.delete,onConfirm:function(){fetch(piranha.baseUrl+"manager/api/content/delete",{method:"delete",headers:piranha.utils.antiForgeryHeaders(),body:JSON.stringify(n)}).then(function(n){return n.json()}).then(function(n){piranha.notifications.push(n),t.load(t.group.id)}).catch(function(n){console.log("error:",n)})}})}},created:function(){}});