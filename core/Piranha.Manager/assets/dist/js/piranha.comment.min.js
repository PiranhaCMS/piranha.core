piranha.comment=new Vue({el:"#comments",data:{loading:!0,contentId:null,items:[],state:"all"},computed:{filteredItems:function(){var t=this;return console.log(">>> self.state="+t.state),t.items.forEach(function(t,e){console.log(">>> >> self.items["+e+"].isApproved="+t.isApproved),console.log(">>> >> self.items["+e+"].isRejected="+t.isRejected),console.log(">>> >> self.items["+e+"].!a&&!r="+(!t.isApproved&&!t.isRejected))}),this.items.filter(function(e){return"all"===t.state||("approved"===t.state?e.isApproved:"rejected"===t.state?e.isRejected:!e.isApproved&&!e.isRejected)})}},methods:{load:function(t){var e=this;t||(t=""),fetch(piranha.baseUrl+"manager/api/comment/"+t).then(function(t){return t.json()}).then(function(t){e.contentId=t.contentId,e.items=t.comments}).catch(function(t){console.log("error:",t)})},approve:function(t){var e=this;fetch(piranha.baseUrl+"manager/api/comment/approve/"+t+(null!=e.contentId?"/"+e.contentId:"")).then(function(t){return t.json()}).then(function(t){t.status&&piranha.notifications.push(t.status),e.contentId=t.contentId,e.items=t.comments}).catch(function(t){console.log("error:",t)})},unapprove:function(t){var e=this;fetch(piranha.baseUrl+"manager/api/comment/unapprove/"+t+(null!=e.contentId?"/"+e.contentId:"")).then(function(t){return t.json()}).then(function(t){t.status&&piranha.notifications.push(t.status),e.contentId=t.contentId,e.items=t.comments}).catch(function(t){console.log("error:",t)})},toggleApproved:function(t){t.isApproved=!t.isApproved,t.isApproved?this.approve(t.id):this.unapprove(t.id)},remove:function(t){var e=this;fetch(piranha.baseUrl+"manager/api/comment/delete/"+t).then(function(t){return t.json()}).then(function(t){piranha.notifications.push(t),e.load(e.contentId)}).catch(function(t){console.log("error:",t)})},setStatus:function(t){this.state=t}},updated:function(){this.loading=!1}});