piranha.alias=new Vue({el:"#alias",data:{loading:!0,siteId:null,siteTitle:null,sites:[],items:[],model:{id:null,aliasUrl:null,redirectUrl:null,isPermanent:!0}},methods:{load:function(a){var i=this;a||(a=""),fetch(piranha.baseUrl+"manager/api/alias/list/"+a).then(function(a){return a.json()}).then(function(a){i.siteId=a.siteId,i.siteTitle=a.siteTitle,i.sites=a.sites,i.items=a.items}).catch(function(a){console.log("error:",a)})},save:function(){var a=document.getElementById("aliasForm");!1!==a.checkValidity()?fetch(piranha.baseUrl+"manager/api/alias/save",{method:"post",headers:piranha.utils.antiForgeryHeaders(),body:JSON.stringify({id:piranha.alias.model.id,siteId:piranha.alias.siteId,aliasUrl:piranha.alias.model.aliasUrl,redirectUrl:piranha.alias.model.redirectUrl,isPermanent:null!=piranha.alias.model.isPermanent&&piranha.alias.model.isPermanent})}).then(function(a){return a.json()}).then(function(i){"success"===i.status.type&&(a.classList.remove("was-validated"),$("#aliasModal").modal("hide"),piranha.alias.model.id=null,piranha.alias.model.aliasUrl=null,piranha.alias.model.redirectUrl=null,piranha.alias.model.isPermanent=!0,piranha.alias.items=i.items),400!==i.status?piranha.notifications.push(i.status):piranha.notifications.unauthorized()}).catch(function(a){console.log("error:",a)}):a.classList.add("was-validated")},remove:function(a){var i=this;piranha.alert.open({title:piranha.resources.texts.delete,body:piranha.resources.texts.deleteAliasConfirm,confirmCss:"btn-danger",confirmIcon:"fas fa-trash",confirmText:piranha.resources.texts.delete,onConfirm:function(){fetch(piranha.baseUrl+"manager/api/alias/delete",{method:"delete",headers:piranha.utils.antiForgeryHeaders(),body:JSON.stringify(a)}).then(function(a){return a.json()}).then(function(a){"success"===a.status.type&&(i.items=a.items),400!==a.status?piranha.notifications.push(a.status):piranha.notifications.unauthorized()}).catch(function(a){console.log("error:",a)})}})}},updated:function(){this.loading=!1}}),$(document).on("shown.bs.modal","#aliasModal",function(a){$(this).find("#aliasUrl").focus()});