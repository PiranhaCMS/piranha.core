piranha.alias=new Vue({el:"#alias",data:{loading:!0,siteId:null,items:[],model:{id:null,aliasUrl:null,redirectUrl:null,isPermanent:!0}},methods:{load:function(){fetch(piranha.baseUrl+"manager/api/alias/list").then(function(a){return a.json()}).then(function(a){piranha.alias.siteId=a.siteId,piranha.alias.items=a.items}).catch(function(a){console.log("error:",a)})},save:function(){fetch(piranha.baseUrl+"manager/api/alias/save",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:piranha.alias.model.id,siteId:piranha.alias.siteId,aliasUrl:piranha.alias.model.aliasUrl,redirectUrl:piranha.alias.model.redirectUrl,isPermanent:null!=piranha.alias.model.isPermanent&&piranha.alias.model.isPermanent})}).then(function(a){return a.json()}).then(function(a){"success"===a.status.type&&($("#aliasModal").modal("hide"),piranha.alias.model.id=null,piranha.alias.model.aliasUrl=null,piranha.alias.model.redirectUrl=null,piranha.alias.model.isPermanent=!0,piranha.alias.items=a.items),piranha.notifications.push(a.status)}).catch(function(a){console.log("error:",a)})},remove:function(a){fetch(piranha.baseUrl+"manager/api/alias/delete/"+a).then(function(a){return a.json()}).then(function(a){piranha.alias.items=a.items,piranha.notifications.push(a.status)}).catch(function(a){console.log("error:",a)})}},created:function(){this.load()},updated:function(){this.loading=!1}}),$(document).on("shown.bs.modal","#aliasModal",function(a){$(this).find("#aliasUrl").focus()});